{"mappings":"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","sources":["public/js/index.js","public/js/updateSettings.js","public/js/alerts.js","public/js/login.js"],"sourcesContent":["/* eslint-disable */\r\n\r\nimport { updateSettings } from './updateSettings.js';\r\nimport { login, logout } from './login.js';\r\n\r\n//DOM ELEMENTS\r\nconst loginForm = document.querySelector('.form--login');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst passwordChangeForm = document.querySelector('.form-user-settings');\r\n//VALUES\r\n\r\n//DELEGATION\r\n\r\nif (loginForm)\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n\r\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\r\n\r\nif (userDataForm)\r\n  userDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n\r\n    console.log(form);\r\n\r\n    updateSettings(form, 'data');\r\n  });\r\n\r\nif (passwordChangeForm)\r\n  passwordChangeForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    await updateSettings(\r\n      { passwordCurrent, password, passwordConfirm },\r\n      'password'\r\n    );\r\n    document.querySelector('.btn--save-password').textContent =\r\n      'Update password';\r\n\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n","// updateData\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts.js';\r\n\r\n//type is either password or data\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    const url =\r\n      type === 'password'\r\n        ? 'http://localhost:3000/api/v1/users/updateMyPassword'\r\n        : 'http://localhost:3000/api/v1/users/updateMe';\r\n\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `${type.toUpperCase()}  updated successfully!`);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n","export const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class= \"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/*  eslint-disable */\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts.js';\r\n\r\nexport async function login(email, password) {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://localhost:3000/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1000);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n}\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: 'http://localhost:3000/api/v1/users/logout',\r\n    });\r\n    if (res.data.status === 'success') location.reload(true);\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again');\r\n  }\r\n};\r\n"],"names":[],"version":3,"file":"app.js.map","sourceRoot":"/"}